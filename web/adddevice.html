<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="adddevice.css">
  <title>Add device</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@200&display=swap" rel="stylesheet">
<link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">

</head>
<body>
  <div class="container">
    <div class="background">
      <img src="./mushroomback.jpg" alt="">
      <h1>Adding devices</h1>
      <p>
        Adding new MUX devices for soil moisture sensors can enhance the real-time monitoring system for mushroom cultivation. These devices provide vital information about soil moisture levels, essential for mushroom growth. The "Add Device" feature incorporates these devices into the monitoring system, improving accuracy and precision in tracking farm conditions. This tool optimizes mushroom production and boosts farming success.
      </p>
    </div>
    <div class="form" >
      <form id="add-mux">
        <h2>Add Device</h2>
        
            <div class="form-group">
              <input type="text"  id="device" placeholder="Device name"  required>
            </div>
            <h3>
              <input type="button" id="btn" value="Submit">
            </h3>
        </div>
      </form>
    </div>
  </div>
</body>
<script src="https://code.jquery.com/jquery-3.6.4.js" integrity="sha256-a9jBBRygX1Bh5lt8GZjXDzyOB+bWve9EiO7tROUtj/E=" crossorigin="anonymous"></script>
<script>
  const API_URL = 'http://localhost:4000/soil/devices';

$('#btn').on('click', () => {
  const device = $('#device').val();

  const body = {
    device
  };

  $.post(`${API_URL}`, body)
    .then(response => {
        console.log("New device added");
        window.location.href="/charts";
    })
    .catch(error => {
      console.error(`Error: ${error}`);
    });
});
</script>
</html>